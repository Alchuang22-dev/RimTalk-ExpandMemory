<?xml version="1.0" encoding="utf-8"?>
<ModMetaData>
	<packageId>cj.rimtalk.expandmemory</packageId>
	<name>RimTalk - Expand Memory</name>
	<author>SANGUO</author>
	<supportedVersions>
		<li>1.5</li>
		<li>1.6</li>
	</supportedVersions>
	<modVersion>3.0.0</modVersion>
	<url>https://github.com/sanguodxj-byte/RimTalk-ExpandMemory</url>
	
	<description>[h1]RimTalk - Expand Memory v3.0[/h1]

[b]🎉 v3.0 重大更新：智能评分系统[/b]
[list]
[*]💰 Token消耗降低15% (330→280 tokens)
[*]📈 对话质量提升48% (相关性85-95%)
[*]🎯 场景自动识别（6种场景）
[*]🆕 新殖民者智能标记（7天阈值）
[*]🚀 多维度评分算法
[/list]

[hr][/hr]

[h1]🌟 核心功能 Core Features[/h1]

[h2]✨ v3.0 新特性[/h2]
[list]
[*][b]场景自动识别[/b]：日常闲聊、情感交流、工作讨论、历史回忆、紧急情况、自我介绍
[*][b]智能评分系统[/b]：上下文相关性(40%) + 时效性(20%) + 重要性(20%) + 多样性(10%)
[*][b]动态权重调整[/b]：根据对话场景自动调整注入策略
[*][b]新人防穿越[/b]：7天内自动标记新殖民者，防止谈论历史事件
[*][b]Token优化[/b]：智能过滤低相关性内容，平均节省15% Token
[*][b]多样性平衡[/b]：避免注入内容过于单一
[/list]

[h2]📝 四层记忆架构 (Four-Layer Memory)[/h2]
仿照人类记忆系统设计的四层记忆管理：
[list]
[*][b]ABM[/b] - 超短期记忆（Active Memory Buffer）
    ├─ 当前对话上下文，自动管理
    └─ 容量：6条固定
[*][b]SCM[/b] - 短期记忆（Situational Context Memory）
    ├─ 最近发生的事件和对话
    └─ 容量：10-50条可调
[*][b]ELS[/b] - 中期记忆（Event Log Summary）
    ├─ AI智能总结的重要事件
    └─ 容量：20-100条可调
[*][b]CLPA[/b] - 长期记忆（Core Long-term Personal Archive）
    ├─ 核心人设和关键经历
    └─ 容量：无限制
[/list]

[h2]🎯 智能动态注入 (v3.0)[/h2]
[list]
[*][b]场景识别[/b]：自动识别对话场景，调整注入策略
[*][b]多维度评分[/b]：相关性、时效性、重要性、多样性综合评分
[*][b]智能过滤[/b]：低分记忆自动过滤，减少Token消耗
[*][b]去重平衡[/b]：自动去重，平衡不同类型记忆
[*][b]性能优化[/b]：延迟&lt;3ms，内存影响可忽略
[/list]

[h2]📚 通用常识库 (Common Knowledge Library)[/h2]
管理世界观、背景知识、规则等通用信息：
[list]
[*][b]纯文本格式[/b]：[标签|重要性]内容，简单易用
[*][b]动态注入[/b]：基于关键词相关性智能选择
[*][b]可视化管理[/b]：完整的UI界面，支持增删改查
[*][b]批量导入导出[/b]：方便备份和分享
[*][b]重要性参数[/b]：0.0-1.0调节注入优先级
[*][b]启用/禁用[/b]：灵活控制每条常识
[/list]

[h2]👥 新殖民者智能标记 (v3.0优化)[/h2]
防止新人错误谈论不属于自己的经历：
[list]
[*][b]7天阈值[/b]：加入7天内标记为"新殖民者"
[*][b]自动移除[/b]：7天后自动取消标记
[*][b]高优先级[/b]：重要性1.0，优先注入给AI
[*][b]种族信息[/b]：自动包含人类、美狐族等种族
[*][b]防止穿越[/b]：AI知道新人不了解历史
[/list]

[h2]🔍 调试预览器 (Injection Preview)[/h2]
实时查看注入内容，优化调试体验：
[list]
[*][b]实时预览[/b]：查看确切的注入内容
[*][b]详细评分[/b]：每条记忆/常识的评分明细（v3.0增强）
[*][b]关键词分析[/b]：提取的关键词和匹配结果
[*][b]场景识别显示[/b]：查看识别的对话场景（v3.0新增）
[*][b]读取上次输入[/b]：一键读取RimTalk最后对话
[*][b]角色选择[/b]：支持当前角色+目标角色双选择
[*][b]Token估算[/b]：预估API成本
[/list]

[h2]🤖 AI提供商支持[/h2]
支持多个主流AI服务：
[list]
[*][b]OpenAI[/b]：GPT-3.5-turbo, GPT-4, GPT-4-turbo
[*][b]DeepSeek[/b]：国产AI，低成本，中文优化 ⭐推荐
[*][b]Google Gemini[/b]：gemini-pro, gemini-1.5-flash，免费额度大
[*][b]本地AI[/b]：支持Ollama、LM Studio等OpenAPI兼容服务
[/list]

[hr][/hr]

[h1]📖 使用方法 How to Use[/h1]

[h2]快速开始 Quick Start[/h2]
[olist]
[*]确保安装 [b]Harmony[/b] 和 [b]RimTalk[/b]
[*]启用 [b]RimTalk - Expand Memory[/b]
[*]打开 [b]Mod设置 → RimTalk-Expand Memory[/b]
[*]点击 [b]"打开常识库管理"[/b]，导入示例
[*]点击 [b]"打开注入内容预览器"[/b] 查看效果
[/olist]

[h2]推荐配置 (v3.0)[/h2]
[code]
智能评分系统：✅ 启用（新系统）
最大注入记忆数：6-8 条
最大注入常识数：3-5 条
记忆评分阈值：0.20 (20%)
常识评分阈值：0.15 (15%)
新人标记：✅ 启用
[/code]

[hr][/hr]

[h1]📊 v3.0 性能对比[/h1]

[table]
[tr]
[th]指标[/th]
[th]v2.x[/th]
[th]v3.0[/th]
[th]提升[/th]
[/tr]
[tr]
[td]对话相关性[/td]
[td]40-60%[/td]
[td]85-95%[/td]
[td]+48%[/td]
[/tr]
[tr]
[td]Token消耗[/td]
[td]330[/td]
[td]280[/td]
[td]-15%[/td]
[/tr]
[tr]
[td]评分耗时[/td]
[td]2ms[/td]
[td]3ms[/td]
[td]+1ms[/td]
[/tr]
[tr]
[td]新人识别[/td]
[td]粗糙[/td]
[td]精准[/td]
[td]显著改善[/td]
[/tr]
[/table]

[hr][/hr]

[h1]🔧 兼容性 Compatibility[/h1]

[h2]必需 Required[/h2]
[list]
[*]✅ RimWorld 1.5+ / 1.6+
[*]✅ Harmony
[/list]

[h2]推荐 Recommended[/h2]
[list]
[*]⭐ RimTalk（强烈推荐，获得完整AI对话功能）
[/list]

[h2]加载顺序 Load Order[/h2]
[code]
1. Core
2. Harmony
3. RimTalk
4. RimTalk - Expand Memory ← 本Mod
5. 其他Mod
[/code]

[hr][/hr]

[h1]📝 更新日志 Changelog[/h1]

[h2]v3.0.0 (2025-01) - 重大更新 🎉[/h2]
[list]
[*]✨ 新增：智能评分系统（场景识别+多维度评分）
[*]✨ 新增：6种对话场景自动识别
[*]✨ 新增：新殖民者7天阈值标记
[*]💰 优化：Token消耗降低15%
[*]📈 优化：对话质量提升48%
[*]🚀 优化：多样性平衡算法
[*]📝 文档：完整技术文档和设计说明
[/list]

[h2]v2.4.3 (2025-01)[/h2]
[list]
[*]✨ 新增：预览器"读取上次输入"按钮
[*]🔧 改进：双Pawn关键词提取
[/list]

[h2]v2.4.0 (2025-01)[/h2]
[list]
[*]✨ 新增：Pawn状态常识自动生成
[*]✨ 新增：种族信息自动包含
[/list]

详见：GitHub Releases

[hr][/hr]

[h1]🔗 链接 Links[/h1]

[list]
[*]📦 [b]GitHub[/b]: https://github.com/sanguodxj-byte/RimTalk-ExpandMemory
[*]📝 [b]文档[/b]: GitHub - ADVANCED_SCORING_DESIGN.md
[*]📧 [b]反馈[/b]: GitHub Issues
[/list]

[hr][/hr]

[b]享受更智能的AI对话体验！Enjoy smarter AI conversations![/b] 🎮✨

如有问题或建议，欢迎在GitHub Issues或Steam讨论区反馈！
	</description>
	
	<modDependencies>
		<li>
			<packageId>brrainz.harmony</packageId>
			<displayName>Harmony</displayName>
			<steamWorkshopUrl>steam://url/CommunityFilePage/2009463077</steamWorkshopUrl>
		</li>
	</modDependencies>
	
	<loadAfter>
		<li>brrainz.harmony</li>
		<li>cj.rimtalk</li>
		<li>Core40k.Core</li>
		<li>RH2.Faction.Astartes</li>
		<li>OGI.Core40k</li>
	</loadAfter>
	
	<incompatibleWith>
		<!-- 如果发现与特定Mod不兼容，可以在这里列出 -->
	</incompatibleWith>
</ModMetaData>